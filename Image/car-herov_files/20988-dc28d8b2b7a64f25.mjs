(self.modernJsonp=self.modernJsonp||[]).push([["20988"],{894870:function(e,t,r){r.d(t,{q:()=>p});var a=r(667294),s=r(581722),n=r(312048),o=r(322830),l=r(935059),i=r(341687),d=r(966039),u=r(179664),c=r(513504);let p=()=>{let e=(0,n.TH)(),t=(0,l.Z)(),r=(0,s.I0)(),{getNuxSignals:p,selectedUseCases:_,selectedPins:g,shouldUseNewReducerState:m}=(0,u.u)(),h=m?p():(0,d.rQ)(_,g);return(0,a.useCallback)(()=>{let a=t.isAuth&&t.firstHomeFeedRequestAfterNux,s=(0,o.Z)({viewerIsPartner:t.isAuth&&t.isPartner,inNux:(a&&r((0,c.H5)(!1)),a),staticFeed:!!(e&&(e.pathname.includes("pwt_performance_testing")||void 0!==(0,i.Z)(e.search).pwt_performance_testing)),inNewsHub:e?.pathname.includes("news_hub")??!1});return{name:"UserHomefeedResource",options:h.length>0?{...s,nux_signals_map:h}:s}},[r,t,e,h])}},322830:function(e,t,r){r.d(t,{Z:()=>a});let a=({inNux:e,inNewsHub:t,staticFeed:r,viewerIsPartner:a})=>({field_set_key:a?"hf_grid_partner":"hf_grid",in_nux:e,in_news_hub:t,static_feed:r})},759271:function(e,t,r){r.d(t,{Z:()=>o});var a=r(501010),s=r(774838),n=r(739405);function o(){let{isAuthenticated:e}=(0,s.B)(),t=(0,n.ml)(),{checkExperiment:r}=(0,a.Z)();return{mWebCloseupRedesignEnabled:e&&t&&r("mweb_closeup_redesign").anyEnabled,mWebCloseupRedesignExpGroup:r("mweb_closeup_redesign").group}}},933442:function(e,t,r){r.d(t,{_:()=>l,p:()=>i});var a=r(667294),s=r(213491),n=r(785893);let{Provider:o,get:l}=(0,s.Z)("VisualShopContext");function i({children:e}){let[t,r]=(0,a.useState)({}),[s,l]=(0,a.useState)({}),i=(0,a.useRef)(0),d=(0,a.useRef)("");return(0,n.jsx)(o,{value:{cachedOneBarModules:t,setCachedOneBarModules:r,cachedDescriptorModules:s,setCachedDescriptorModules:l,imageContainerScrollTop:i,imageContainerScrollTopForPinId:d},children:e})}},59111:function(e,t,r){r.d(t,{Z:()=>l});var a=r(686659),s=r(667294);r(441143);var n=r(785893);class o{static factory(e){return e instanceof o?e:new o(String(e))}constructor(e){this._private_safe_value=e.trim().replace(">",">").replace("<","<").replace("&","&").replace('"','"').replace("'","'")}toString(){return this._private_safe_value}}function l(e){(0,s.useEffect)(()=>{(0,a.Z)("InlineStyle","/app/packages/InlineStyle.tsx")},[]);let{css:t,unsafeCSS:r,...l}=e,i=String(t||"")||r||"";return i?(0,n.jsx)("style",{...l,dangerouslySetInnerHTML:{__html:String(o.factory(i))}}):null}},538985:function(e,t,r){r.d(t,{Cd:()=>h,G:()=>C,IA:()=>P,M5:()=>w,ML:()=>c,Oh:()=>A,Pe:()=>u,Tv:()=>g,Uy:()=>p,Xf:()=>E,cO:()=>f,ew:()=>_,nN:()=>y,p9:()=>T,yo:()=>m});var a=r(423234),s=r(112274),n=r(943271),o=r(245563),l=r(216975),i=r(841270),d=r(767415);let u=e=>e._('Make sure this age is accurate. Your birthdate is required for personalization, community safety and as part of our terms of service. For business accounts, use your own birthdate.', 'birthdateConfirmation.HelperText', 'Helper text notifying users to input their own birthday'),c=e=>e._('Use your own birthday, even if this a business account', 'birthdateConfirmation.HelperText.ownBirthday', 'Helper text notifying users to input their own birthday'),p=e=>e._('Oops! Please use a valid age to sign up.', 'existingUser.birthdaycollection.error.overage', 'Error message shown when overage (age over 120) user tries to register'),_=(e,t)=>{let{locale:r}=t.getLocaleData(),a=(0,o.Z)(e),s=a.toLocaleString(r,{month:"long"}),n=a.getDate().toString(),i=a.getFullYear();return(0,l.nk)(t._('Is {{month}} {{day}}, {{year}} your birthday?', 'birthdateConfirmation.heading', 'Header for the confirmation model verifying the age for the birthdate that the user inputted, month: month inputted into the fields, day: day inputted into the fields, year: year inputted into the fields'),{month:s,day:n,year:i})},g=(e,t,r,a,s=!1)=>{let n=(0,l.nk)(s?e._('Oops! Please enter a valid {{dayError}}{{monthError}}{{yearError}}.', 'settings birthday error message', 'label for settings birthday error message. dayError: Incorrect day. monthError: Incorrect month. yearError: Incorrect year.'):e._('Oops! Please enter a valid {{dayError}}{{monthError}}{{yearError}} to sign up.', 'signup birthday error message', 'label for sign up birthday error message'),{dayError:t?e._('day', 'dayError keyword placeholder', 'label for dayError keyword place holder'):"",monthError:r?e._('month', 'monthError keyword placeholder', 'label for monthError keyword place holder'):"",yearError:a?e._('year', 'monthError keyword placeholder', 'label for monthError keyword place holder'):""}).filter(e=>0!==e.length);return 3===n.length?n.join(""):n[0]+n.slice(1,-1).join(", ")+n[n.length-1]},m=({country:e})=>e&&e in i.T3?i.T3[e]:i.Ur,h=(e,t)=>{let r=new Date,a=new Date(r.getFullYear()-t,r.getMonth(),r.getDate());return new Date(e)<=a},f=new Date().getFullYear(),y=new Date().getFullYear()-120,E=12,A=1,T=1,C=31,b="yyyy-MM-dd",w=e=>{let t=new Date,r=new Date(y,t.getMonth(),t.getDate()),a=h(e,5),s=new Date(e)>r;return a&&s};function P(e){let t=(0,a.Z)(e,b,new Date);if((0,s.Z)(t))return e;let r=new Date(e);try{return(0,n.Z)(r,b)}catch{return(0,d.nP)("webapp.birthday_validation_error",{sampleRate:1,tags:{birthdate:e}}),e}}},245563:function(e,t,r){r.d(t,{Z:()=>a});let a=e=>{let t=new Date(e);return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate())}},465784:function(e,t,r){r.d(t,{ZP:()=>u,bN:()=>i,p4:()=>d});var a=r(686659),s=r(667294),n=r(739405),o=r(9065),l=r(785893);let i=(0,o.Z)(()=>r.e("44109").then(r.bind(r,551737)),{ssr:!1},e=>551737,"DesktopModal",e=>["44109"]),d=(0,o.Z)(()=>r.e("45718").then(r.bind(r,659546)),{ssr:!1},e=>659546,"MobileModal",e=>["45718"]);function u(e){(0,s.useEffect)(()=>{(0,a.Z)("Modal","/app/packages/gestaltExtensions/Modal.tsx")},[]);let t=(0,n.ZP)(),r=void 0===e.isOpen||e.isOpen;if("desktop"===t&&r){let{isOpen:t,mobileAccessibilityCloseIconLabel:r,mobileAllowScroll:a,mobileHeadingSize:s,mobileHideCloseIcon:n,mobileIsFullscreen:o,mobileIsSlideUp:d,mobileTopOffset:u,type:c,mobileIsFooter:p,zIndex:_,...g}=e;return(0,l.jsx)(i,{...g})}let{allowMediaPlay:o,allowScroll:u,role:c,size:p,_dangerouslyDisableScrollBoundaryContainer:_,layerZIndex:g,...m}=e;return(0,l.jsx)(d,{...m,isOpen:r})}},924591:function(e,t,r){r.d(t,{Z:()=>u});var a=r(686659),s=r(667294),n=r(235045),o=r(100424),l=r(739405),i=r(893957),d=r(785893);function u({_dangerouslySetThumbnail:e,_dangerouslySetPrimaryAction:t,text:r,primaryAction:u,dismissButton:c,helperLink:p,thumbnail:_,type:g,dataTestId:m,duration:h=2e3,onHide:f,href:y,onClick:E,openNewPage:A,imageUrl:T}){let C;(0,s.useEffect)(()=>{(0,a.Z)("Toast","/app/packages/gestaltExtensions/Toast.tsx")},[]);let b=(0,l.ZP)(),[w,P]=(0,s.useState)(!1),[v,M]=(0,s.useState)(!1),S=(0,s.useRef)(void 0),D=()=>{P(!0),S.current=setTimeout(f,o.Vg)},G=()=>{S.current=setTimeout(D,h)},O=()=>{S.current&&clearTimeout(S.current)};(0,i.Z)(()=>(setTimeout(()=>M(!0),100),G(),O)),T&&(C={image:(0,d.jsx)(n.Ee,{alt:"string"==typeof r?r:`${r[0]} ${r[1]}`,fit:"cover",naturalHeight:1,naturalWidth:1,src:T})});let R=(0,d.jsx)(n.FN,{_dangerouslySetPrimaryAction:t,_dangerouslySetThumbnail:e,dismissButton:c,helperLink:p,primaryAction:u,text:r,thumbnail:C??_,type:g}),{marginTop:Z,opacity:x,pointerEvents:I,position:U,transform:N,transition:L,visibility:k}=(0,o.ZP)({deviceType:b,hiding:w,visible:v});return(0,d.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{transform:N,transition:L,visibility:k,pointerEvents:I}},"data-test-id":m??"toast",display:"flex",marginTop:Z,onMouseEnter:O,onMouseLeave:G,opacity:x,position:U,children:y?(0,d.jsx)(n.Tg,{href:y,onTap:({event:e,dangerouslyDisableOnNavigation:t})=>{y.startsWith("#")&&(e.preventDefault(),t()),E?.(e)},rounding:"pill",target:A?"blank":null,children:R}):R})}},100424:function(e,t,r){r.d(t,{Vg:()=>a,ZP:()=>s});let a=200,s=({deviceType:e,hiding:t,visible:r})=>{let a="desktop"===e,s=0,n=a?"translateY(200px)":"translateY(-200px)",o="opacity 0.1s ease-in-out",l="hidden";return r&&!t&&(s=1,n="translateY(0)",o="all 0.7s cubic-bezier(.19, 1.15, .48, 1)",l="visible"),r&&t&&(n="scale(1.1)",o="opacity transform 0.2s"),{opacity:s,pointerEvents:"auto",position:"relative",marginTop:10*!!a,transform:n,transition:o,visibility:l}}},319226:function(e,t,r){r.d(t,{u_:()=>c.ZP,FN:()=>p.Z,qE:()=>o,HE:()=>u});var a=r(235045),s=r(785893);function n({accessibilityLabel:e,color:t,name:r,outline:n,size:o,src:l,verified:i}){return(0,s.jsx)(a.qE,{accessibilityLabel:e,color:t,name:r,outline:n,size:o,src:l?.includes("images/user/default")&&r?void 0:l,verified:i})}n.displayName="Avatar";let o=n;var l=r(216975),i=r(24246);function d({accessibilityControls:e,accessibilityExpanded:t,accessibilityHaspopup:r,addCollaborators:n,collaborators:o,href:d,onClick:u,ref:c,role:p,size:_}){let g=(0,i.Z)();return(0,s.jsx)(a.HE,{ref:c,accessibilityControls:e,accessibilityExpanded:t,accessibilityHaspopup:r,accessibilityLabel:(({listOfUsers:e,i18n:t,addCollaborators:r=!1})=>{let a={first:e[0]??"",second:e[1]??"",third:e[2]??"",remaining:String(e.length-2)};if(e.length-2>=99)return r?(0,l.Wc)(t._('Collaborators: {{ first }}, {{ second }} and over 99 others. Add collaborators.', 'getTranslatedList.moreThan99PeopleAndAddCollaborators', 'Generic message that lists more than 99 people (ex: Stevie, Michael, and over 99 others) and suggests adding collaborators. first: the first person, second: the second person'),a):(0,l.Wc)(t._('Collaborators: {{ first }}, {{ second }} and over 99 others.', 'getTranslatedList.moreThan99People', 'Generic message that lists more than 99 people (ex: Stevie, Michael, and over 99 others). first: the first person, second: the second person'),a);if(r)switch(e.length){case 0:return"";case 1:return(0,l.Wc)(t._('Collaborators: {{ first }}. Add collaborators.', 'getTranslatedList.onePersonAndAddCollaborator', 'Generic message that lists 1 person (ex: Stevie) and suggests adding collaborators. first: the first person, second: the second person'),a);case 2:return(0,l.Wc)(t._('Collaborators: {{ first }} and {{ second }}. Add collaborators.', 'getTranslatedList.twoPeopleAndAddCollaborator', 'Generic message that lists 2 people (ex: Stevie and Michael) and suggests adding collaborators. first: the first person, second: the second person'),a);case 3:return(0,l.Wc)(t._('Collaborators: {{ first }}, {{ second }} and {{ third }}. Add collaborators.', 'getTranslatedList.threePeopleAndAddCollaborator', 'Generic message that lists 3 people (ex: Stevie, Michael and Alberto) and suggests adding collaborators. first: the first person, second: the second person, third: the third person'),a);default:return(0,l.Wc)(t._('Collaborators: {{ first }}, {{ second }} and {{ remaining }} more. Add collaborators.', 'getTranslatedList.moreThan2PeopleAndAddCollaborators', 'Generic message that lists more than 2 people (ex: Stevie, Michael, and more) and suggests adding collaborators. first: the first person, second: the second person, remaining: the remaining items'),a)}switch(e.length){case 0:return"";case 1:return(0,l.Wc)(t._('{{ first }}.', 'getTranslatedList.onePerson', 'Generic message that lists 1 person (ex: Stevie). first: the first person'),a);case 2:return(0,l.Wc)(t._('Collaborators: {{ first }} and {{ second }}.', 'getTranslatedList.twoPeople', 'Generic message that lists 2 people (ex: Stevie and Michael) and suggests adding a collaborator. first: the first person, second: the second person'),a);case 3:return(0,l.Wc)(t._('Collaborators: {{ first }}, {{ second }} and {{ third }}.', 'getTranslatedList.threePeople', 'Generic message that lists 3 people (ex: Stevie, Michael and Alberto). first: the first person, second: the second person, third: the third person'),a);default:return(0,l.Wc)(t._('Collaborators: {{ first }}, {{ second }} and {{ remaining }} more.', 'getTranslatedList.moreThan2People', 'Generic message that lists more than 2 people (ex: Stevie, Michael, and 2 more). first: the first person, second: the second person, remaining: the remaining items'),a)}})({listOfUsers:o.map(e=>e.name),i18n:g,addCollaborators:n}),addCollaborators:n,collaborators:o.map(e=>{let t;return{...e,src:(t=e.src,t?.includes("images/user/default"))?void 0:e.src}}),href:d,onClick:u,role:p,size:_})}d.displayName="AvatarGroup";let u=d;var c=r(465784),p=r(924591)},890678:function(e,t,r){r.d(t,{Z:()=>n});var a=r(629972),s=r(957547);function n(e){let{enabledRouteRefresh:t,headers:r,name:n,noCache:o,options:l,schema:i}=e??{name:a.fY,options:null},d=!e,{fetchResource:u,ref:c,fetchMore:p,isFetching:_,isLoaded:g,isRefreshing:m,refresh:h}=(0,s.Z)({enabledRouteRefresh:t,headers:r,name:n,noCache:o,options:l,schema:i},d,!1);return d||u(),{ref:c,fetchMore:p,isFetching:_,isLoaded:g,isRefreshing:m,refresh:h}}},640200:function(e,t,r){r.d(t,{Z:()=>a});function a(e){return e.replace(/[_.-](\w|$)/g,(e,t)=>t.toUpperCase())}},577356:function(e,t,r){r.d(t,{Zo:()=>a,dI:()=>s});let{Provider:a,get:s}=(0,r(213491).Z)("toastManagerContext")},145626:function(e,t,r){r.d(t,{AO:()=>g,Ag:()=>n,C0:()=>i,L1:()=>p,Vi:()=>o,Wm:()=>m,YD:()=>c,kS:()=>s,oo:()=>l,p3:()=>_,vC:()=>d,vI:()=>u});var a=r(721703);let s="https://www.pinterest.com/business/hub/",n="https://www.pinterest.com/homefeed/",o="www.pinterest.com",l="https://www.pinterest.com/_/_/help",i=`${(0,a.Z)({site:"www"})}`,d=(0,a.Z)({site:"developers"}),u=`${(0,a.Z)({site:"sterling"})}`,c=`${(0,a.Z)({site:"analytics"})}`,p=`${(0,a.Z)({site:"trends"})}`,_=`${(0,a.Z)({site:"www",path:"/business/catalogs/?advertiserId="})}`,g=`${(0,a.Z)({site:"business"})}`,m="https://www.pinterest.com/_/_/policy"},17658:function(e,t,r){r.d(t,{Z:()=>s});var a=r(667294);function s(e,t){let r=(0,a.useRef)([]),[s,n]=(0,a.useState)(),[o,l]=(0,a.useReducer)(s??(()=>t),t),i=(0,a.useCallback)(t=>{s?l(t):(r.current.length||e().then(e=>{n(()=>e.default)}),r.current=[...r.current,t])},[e,s]);return(0,a.useEffect)(()=>{s&&(r.current.forEach(l),r.current=[])},[s]),[o,i]}},209179:function(e,t,r){r.d(t,{Z:()=>s});let a=/^(?:https?:\/\/)?([^\s\/?#."]+\.)+([^\s\/?#."]+)(\/[^\s?#]*)?(#[^\s]*)?(\?[^"]*)?$/;function s(e,t){return!!e&&a.test(e)&&(e.startsWith("http://")||e.startsWith("https://")||!!t?.protocolIsOptional)}},496883:function(e,t,r){r.d(t,{Bh:()=>g,C9:()=>w,CU:()=>d,ES:()=>P,FU:()=>O,GT:()=>u,Gy:()=>A,J_:()=>S,Jx:()=>f,Ks:()=>R,MZ:()=>T,Pg:()=>y,U2:()=>x,VC:()=>h,VG:()=>c,ZA:()=>p,Zt:()=>E,a3:()=>Z,aH:()=>i,fS:()=>_,nw:()=>b,oR:()=>v,qA:()=>m,qp:()=>D,sG:()=>C,vd:()=>G,xk:()=>M});var a=r(538985),s=r(99737),n=r(209179);let o={January:31,February:29,March:31,April:30,May:31,June:30,July:31,August:31,September:30,October:31,November:30,December:31},l=e=>{let t={"０":"0","１":"1","２":"2","３":"3","４":"4","５":"5","６":"6","７":"7","８":"8","９":"9","　":" "},r=String(e).split("");return r.forEach((e,a)=>{let s=t[e];s&&(r[a]=s)}),r.join("")};function i(e){return(t,r)=>{let a=[];t&&/\S/.test(t)||a.push(e.message);let s={errors:a,warnings:[]};return r&&r(s),s}}let d=RegExp("(^[-!#$%&'*+/=?^_`{}|~0-9A-Z]+(\\.[-!#$%&'*+/=?^_`{}|~0-9A-Z]+)*|^\"([\\001-\\010\\013\\014\\016-\\037!#-\\[\\]-\\177]|\\\\[\\001-\\011\\013\\014\\016-\\177])*\")@((?:[A-Z0-9](?:[A-Z0-9-]{0,61}[A-Z0-9])?\\.)+[A-Z]{2,20}$)|\\[(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)(\\.(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)){3}\\]$","i");function u(e){return(t,r)=>{t=t&&t.trim();let a=[];t.match(d)||a.push(e.message);let s={errors:a,warnings:[]};return r&&r(s),s}}function c(e){return(t,r)=>{t=t&&t.trim();let a=[];t.match(/^[^0-9].*$/)||a.push(e.message);let s={errors:a,warnings:[]};return r&&r(s),s}}function p(e){return(t,r)=>{let a=[];if(t){let r=parseInt(t,10);Number.isNaN(r)?a.push(e.invalidAgeString):(e.ageTooShortString&&r<10&&a.push(e.ageTooShortString),r<=0||r>120?a.push(e.invalidAgeString):e.checkUnderAgeWithString&&r<18&&a.push(e.checkUnderAgeWithString))}let s={errors:a,warnings:[]};return r&&r(s),s}}function _(e){return(t,r)=>{let a=[],[s,n]=t.split(" ");if(s)if(s.match(/^[0-9]+$/)){let t=parseInt(s,10);(Number.isNaN(t)||t>31||t>o[n])&&a.push(e.invaliddobDateString)}else a.push(e.invaliddobDateString);let l={errors:a,warnings:[]};return r&&r(l),l}}function g(e){return(t,r)=>{let a=(t=t&&t.trim()).replace(/[\(\)\+\-\. ]/g,""),s=[],n=!1!==e.checkLength&&a.length<7;t&&(!t.match(/^(\(?\+?[0-9]*\)?)?[0-9_\- \.\(\)]*$/g)||n)&&s.push(e.message);let o={errors:s,warnings:[]};return r&&r(o),o}}function m(e){return(t,r)=>{let a=[];"number"==typeof t||"string"==typeof t&&(t=l(t=t&&t.trim()))&&!t.match(/^\d+$/)&&a.push(e.message);let s={errors:a,warnings:[]};return r&&r(s),s}}function h(e){return(t,r)=>{let a=[];"number"==typeof t||"string"==typeof t&&(t=l(t=t&&t.trim()))&&!t.match(/^[\d\ -]+$/)&&a.push(e.message);let s={errors:a,warnings:[]};return r&&r(s),s}}function f({message:e}){return(t,r)=>{let a=[];t&&!(0,n.Z)(t,{protocolIsOptional:!0})&&a.push(e);let s={errors:a,warnings:[]};return r&&r(s),s}}function y(e){return(t,r)=>{let a={errors:t&&!/^(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(t)?[e.message]:[],warnings:[]};return r&&r(a),a}}function E(e){return(t,r)=>{let a=[];if(t)try{let r=(0,s.Z)(t);r&&r.protocol&&("http"!==r.protocol||"localhost"===r.hostname)||a.push(e.message)}catch(t){a.push(e.message)}let n={errors:a,warnings:[]};return r&&r(n),n}}function A(e){return(t,r)=>{let a=e.should_trim||!1,s=[];a&&(t=t&&t.trim());let n=t.length;"min"in e&&e.min>0&&n<e.min?s.push(e.minErrorString):"max"in e&&e.max>0&&n>e.max&&s.push(e.maxErrorString);let o={errors:s,warnings:[]};return r&&r(o),o}}function T(e){return(t,r)=>{let a=!e.checkExclusion,{substrings:s}=e,n=[];(a&&!s.some(e=>t.includes(e))||!a&&s.some(e=>t.includes(e)))&&n.push(e.message);let o={errors:n,warnings:[]};return r&&r(o),o}}function C(e){return(t,r)=>{let a=e&&e.targetValue,s=[];t!==a&&s.push(e.message);let n={errors:s,warnings:[]};return r&&r(n),n}}function b(e){return(t,r)=>{let a=[];(t?parseFloat(t):0)<e.value&&a.push(e.message);let s={errors:a,warnings:[]};return r&&r(s),s}}function w(e){return(t,r)=>{let a=new Date(t),s=[];e.date instanceof Date&&a instanceof Date&&e.date<a&&s.push(e.message);let n={errors:s,warnings:[]};return r&&r(n),n}}function P(e){return(t,r)=>{let s=new Date(t),n=e.date instanceof Date&&s instanceof Date,o=[];(n&&e.date<s||!(0,a.M5)(t))&&o.push(e.message);let l={errors:o,warnings:[]};return r&&r(l),l}}function v(e){return(t,r)=>{let a=[];/^[\x20-\x7E]*$/.test(t)||a.push(e.message);let s={errors:a,warnings:[]};return r&&r(s),s}}function M(e){return(t,r)=>{let a=2;if(e.hasFractionalCents)a=3;else if(e.currencyCode){let{maximumFractionDigits:t}=new Intl.NumberFormat(void 0,{style:"currency",currency:e.currencyCode}).resolvedOptions();a=t}let s=new RegExp(a?`^\\d*(\\.\\d{1,${a}})?$`:"^\\d*$"),n=[];t&&!t.match(s)&&(t=t&&t.trim(),n.push(e.message));let o={errors:n,warnings:[]};return r&&r(o),o}}function S(e){return(t,r)=>{t=t&&t.trim();let a=[],s=new Date(t);t&&!s.getTime()&&a.push(e.message);let n={errors:a,warnings:[]};return r&&r(n),n}}function D(e){return(t,r)=>{let a=t&&t.trim(),s=[];a&&!a.match(/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/)&&s.push(e.message);let n={errors:s,warnings:[]};return r&&r(n),n}}function G(e){return(t,r)=>{let a=[];e.pattern.test(t)||a.push(e.message);let s={errors:a,warnings:[]};return r&&r(s),s}}function O(e,t){return[].concat(...e.map(e=>e(t).errors))}async function R(e,t){return[].concat(...await Promise.all(e.map(async e=>{let r=e(t);return r instanceof Promise?(await r)(t).errors:r.errors})))}function Z(e,t){let r="";return t.some(t=>{let a=t(e);return a.errors.length>0&&(r=a.errors[0],!0)}),r}async function x(e,t){let r="";for(let a of t){let t=a(e);if(t instanceof Promise){let a=(await t)(e);if(a.errors.length>0){r=a.errors[0];break}}else if(t.errors.length>0){r=t.errors[0];break}}return r}},264267:function(e,t,r){r.d(t,{pb:()=>E,nf:()=>A,lV:()=>T});var a=r(667294),s=r(581722),n=r(441143),o=r.n(n),l=r(27399),i=r(213491),d=r(47755),u=r(57887),c=r(360033),p=r(730056);let _={feature_map:Object.freeze({})},g=(e,t)=>{let r={...(0,p.Z)(e,t),...t.reaction_counts?{reaction_counts:t.reaction_counts}:Object.freeze({}),...t.tags?{tags:t.tags}:Object.freeze({}),...t.tagged_users?{tagged_users:t.tagged_users}:Object.freeze({})};return(0,c.ZP)(e,r)?e:r},m=(e,t)=>{if(e=e||_,"FETCH_COMPLETE"===t.type){let{payload:{resource:r,options:a={}}}=t,{data:s}=t.payload.response.resource_response;if("AggregatedCommentReplyFeedResource"===r||"ApiResource"===r&&a.url===`/v3/aggregated_comments/${a.data?.aggregated_comment}/replies/`||"ApiResource"===r&&a.url===`/v3/aggregated_pin_data/${a.data?.aggregated_pin_data}/comments/`||"DidItCommentsResource"===r){let t=(s||[]).reduce((t,r)=>(t[r.id]=g(e[r.id],r),t),{});return{...e,...t}}if("UnifiedCommentsResource"===r&&s&&s.length>0){let t=s.filter(e=>"aggregatedcomment"===e.type).reduce((t,r)=>(t[r.id]=g(e[r.id],r),t),{});return{...e,...t}}if("UnifiedCommentsPreviewResource"===r&&s&&s.length>0){let t=s.map(e=>e.aggregated_comment).reduce((t,r)=>(r&&(t[r.id]=g(e[r.id],r)),t),{}),r=s.map(e=>e.creator_reply).reduce((t,r)=>(r&&r.id&&(t[r.id]=g(e[r.id],r)),t),{});return{...e,...t,...r}}if("ApiResource"===r&&"/v3/aggregated_comments/features/"===a.url&&s&&Object.keys(s).length>0)return{...e,feature_map:s}}else if("AGGREGATED_COMMENT_CREATED"===t.type){let{payload:{aggregatedComment:r}}=t;return r.id?{...e,[r.id]:r}:e}else if("AGGREGATED_COMMENT_DELETED"===t.type||"AGGREGATED_COMMENT_HIDDEN"===t.type){let{payload:{aggregatedCommentId:r}}=t,a={...e};return delete a[r],a}else if("AGGREGATED_COMMENT_HIDDEN_FOR_USER"===t.type){let{payload:{userId:r}}=t;return Object.fromEntries(Object.entries(e??{}).filter(e=>e[1].user?.id!==r))}else if("AGGREGATED_COMMENT_UPDATED"===t.type){let{payload:{data:r}}=t;return{...e,[r.id]:g(e?.[r.id],r)}}else if("AGGREGATED_COMMENT_LIKE_TOGGLED"===t.type){let{payload:{data:r}}=t,a=e?.[r.id],s=a?.reaction_counts[1]||0,n={1:r.reaction_by_me?s+1:s-1},o={...a,reaction_by_me:r.reaction_by_me,reaction_counts:n};return{...e,[r.id]:o}}else if("AGGREGATED_COMMENT_HELPFUL_TOGGLED"===t.type){let{payload:{data:r}}=t,a=e?.[r.id],s=a?.helpful_count||0,n=r.marked_helpful_by_me?s+1:s-1,o={...a,marked_helpful_by_me:r.marked_helpful_by_me,helpful_count:n};return{...e,[r.id]:o}}else if("AGGREGATED_COMMENT_HIGHLIGHT_TOGGLED"===t.type){let{payload:{data:r}}=t,a={...e?.[r.aggregated_comment_id],highlighted_by_pin_owner:r.is_highlighted};return{...e,[r.aggregated_comment_id]:a}}else if("AGGREGATED_COMMENT_FEATURES_UPDATED"===t.type){let{payload:{data:{featureMap:r}}}=t;return{...e,feature_map:{...e?.feature_map,...r}}}else if("UPDATE_AGGREGATED_COMMENT_COMMENT_COUNT"===t.type){let{payload:{increment:r,id:a}}=t,s=e?.[a];if(!s)return e;let n={...s,comment_count:s.comment_count+r};return{...e,[a]:n}}else if("DELETE_COMMENT_MENTION"===t.type){let{payload:{aggregatedCommentId:r,tagged_users:a}}=t,s={...e?.[r],tagged_users:a};return{...e,[r]:s}}else if("GET_COMMENT_TRANSLATION"===t.type){let{payload:{aggregatedCommentId:r,translatedText:a}}=t,s={...e?.[r],translatedText:a};return{...e,[r]:s}}return e};var h=r(785893);let{Provider:f,get:y}=(0,i.Z)("AggregatedComments");function E({children:e}){let t=(0,s.v9)(({resources:e})=>e?.UnifiedCommentsResource),r=_;t&&Object.values(t).forEach(e=>{let t=e.data?.filter(e=>"aggregatedcomment"===e.type),a=t?.reduce((e,t)=>(e[t.id]=g(r[t.id],t),e),{});r={...r,...a}});let[n,o]=(0,a.useReducer)(m,r),l=e=>{o({type:"FETCH_COMPLETE",payload:e})};(0,u.Z8)("AggregatedCommentReplyFeedResource",l),(0,u.my)("AggregatedCommentReplyFeedResource",l),(0,u.Z8)("ApiResource",l),(0,u.my)("ApiResource",l),(0,u.Z8)("DidItCommentsResource",l),(0,u.my)("DidItCommentsResource",l),(0,u.Z8)("UnifiedCommentsPreviewResource",l),(0,u.my)("UnifiedCommentsPreviewResource",l),(0,u.Z8)("UnifiedCommentsResource",l),(0,u.my)("UnifiedCommentsResource",l);let i=(0,a.useMemo)(()=>({aggregatedComments:n,dispatch:o}),[n,o]);return(0,h.jsx)(f,{value:i,children:e})}function A(){let{dispatch:e}=y();return(0,a.useMemo)(()=>({aggregatedCommentCreated(t,r){e({type:"AGGREGATED_COMMENT_CREATED",payload:{parentId:t,aggregatedComment:r}})},aggregatedCommentDeleted:(t,r)=>{e({type:"AGGREGATED_COMMENT_DELETED",payload:{parentId:t,aggregatedCommentId:r}})},aggregatedCommentHidden:t=>{e({type:"AGGREGATED_COMMENT_HIDDEN",payload:{aggregatedCommentId:t}})},aggregatedCommentsHiddenForUser:t=>{e({type:"AGGREGATED_COMMENT_HIDDEN_FOR_USER",payload:{userId:t}})},flagAggregatedComment:async({isAggregatedComment:e=!0,commentId:t,reason:r,detailedReasons:a})=>e?(0,d.Z)({url:"/v3/aggregated_comments/{aggregated_comment}/flag/",urlParams:{aggregated_comment:t},method:"PUT",data:{reason:r,detailed_reasons:a}}):(0,d.Z)({url:"/v3/did_it/{user_did_it_data}/flag/",urlParams:{user_did_it_data:t},method:"PUT",data:{reason:r,detailed_reasons:a}}),deleteCommentMention:async t=>{let{resource_response:r}=await (0,d.Z)({url:"/v3/aggregated_comments/{aggregated_comment}/mentions/",urlParams:{aggregated_comment:t},method:"DELETE"}),a=r.data;a?.id&&e({type:"DELETE_COMMENT_MENTION",payload:{aggregatedCommentId:a.id,tagged_users:a.tagged_users??[]}})},translateAggregatedComment:async t=>{try{let{resource_response:r}=await (0,d.Z)({url:"/v3/aggregated_comments/{aggregated_comment}/translate/",urlParams:{aggregated_comment:t},method:"GET"}),a=r.data??"";e({type:"GET_COMMENT_TRANSLATION",payload:{aggregatedCommentId:t,translatedText:a}})}catch(r){e({type:"GET_COMMENT_TRANSLATION",payload:{aggregatedCommentId:t,translatedText:""}})}},toggleAggregatedCommentHelpful:({aggregatedCommentId:t,isMarkedHelpfulByMe:r,orbacSubjectId:a})=>{(0,d.Z)({url:`/v3/helpful/1/${t}/`,method:r?"DELETE":"POST",data:a?{orbac_subject_id:a}:{}}),e({type:"AGGREGATED_COMMENT_HELPFUL_TOGGLED",payload:{data:{id:t,marked_helpful_by_me:!r}}})},toggleAggregatedCommentHighlight:async({aggregatedCommentId:t,pinId:r,isHighlighted:a})=>{o()(t,"Could not find comment"),o()(r,"Could not find Pin"),await (0,d.Z)({url:"/v3/aggregated_comments/pin/highlight/",method:"PUT",data:{aggregated_comment:t,pin:r,highlight:!a}}),e({type:"AGGREGATED_COMMENT_HIGHLIGHT_TOGGLED",payload:{data:{aggregated_comment_id:t,pin_id:r,is_highlighted:!a}}})},toggleAggregatedCommentLike:({aggregatedCommentId:t,isLikedByMe:r,orbacSubjectId:a})=>{(0,d.Z)({url:"/v3/aggregated_comments/{aggregated_comment}/react/",urlParams:{aggregated_comment:t},method:r?"DELETE":"POST",data:{reaction_type:1,...a?{orbac_subject_id:a}:{}}}),e({type:"AGGREGATED_COMMENT_LIKE_TOGGLED",payload:{data:{id:t,reaction_by_me:+!r}}})},updateAggregatedComment:async({commentId:t,force:r,orbacSubjectId:a,tags:s,text:n})=>{let{resource_response:o}=await l.Z.create("AggregatedCommentResource",{commentId:t,force:r,tags:s,text:n,...a?{orbacSubjectId:a}:{}}).callUpdate({showError:!1}),{tagged_users:i}=o.data??{};e({type:"AGGREGATED_COMMENT_UPDATED",payload:{data:{id:t,tagged_users:i.map(e=>({...e})),tags:JSON.parse(s),text:n}}})},updateAggregatedCommentFeatures:async({userId:t,featureMap:r,passcode:a,userConfirmPasscode:s})=>{let{resource_response:n}=await (0,d.Z)({url:"/v3/aggregated_comments/features/",method:"PUT",data:{user:t,feature_map:JSON.stringify(r),passcode:a,user_confirm_skip_passcode:s??!1}});e({type:"AGGREGATED_COMMENT_FEATURES_UPDATED",payload:{data:{featureMap:n.data??Object.freeze({})}}})},updateCommentCount:(t,r)=>{e({type:"UPDATE_AGGREGATED_COMMENT_COMMENT_COUNT",payload:{increment:r,id:t}})}}),[e])}function T(){let{aggregatedComments:e}=y();return e}},74972:function(e,t,r){r.d(t,{g:()=>p,G:()=>c});var a=r(667294),s=r(213491),n=r(970414),o=r(515511);let l={appInFocus:!0,footerPlusButtonVisible:!0,isAutoplay:!1,showTypeaheadOverlay:!1,videosAutoplaying:{currentlyPlayingOrganicVideoId:null,organicVideosAutoplaying:{},promotedVideosAutoplaying:{},videoCarouselModuleAutoplaying:{}},viewportSize:"lg"},i=(e=l,t)=>{if("TOGGLE_TYPEAHEAD_OVERLAY"===t.type&&e.showTypeaheadOverlay!==t.payload)return{...e,showTypeaheadOverlay:t.payload};if("SET_CURRENT_VIDEO"===t.type){let{payload:r}=t,{pinId:a,isPromoted:s,currentTime:n,surface:l}=r,{videosAutoplaying:i}=e,{currentlyPlayingOrganicVideoId:d,promotedVideosAutoplaying:u,organicVideosAutoplaying:c,videoCarouselModuleAutoplaying:p}=i,_=(0,o.Z)(u),g=(0,o.Z)(c),m=(0,o.Z)(p);return!s&&d&&"VideoCarouselModule"!==l?e:(s?_[a]={pinId:a,currentTime:n,paused:!1}:"VideoCarouselModule"===l?m[a]={pinId:a,currentTime:n,paused:!1}:g[a]={pinId:a,currentTime:n,paused:!1},{...e,videosAutoplaying:{currentlyPlayingOrganicVideoId:s?d:a,promotedVideosAutoplaying:_,organicVideosAutoplaying:g,videoCarouselModuleAutoplaying:m}})}if("SET_IS_AUTOPLAY"===t.type&&e.isAutoplay!==t.payload)return{...e,isAutoplay:t.payload};if("PAUSE_CURRENT_VIDEO"===t.type){let{payload:r}=t,{pinId:a,isPromoted:s,currentTime:n,surface:l}=r,{videosAutoplaying:i}=e,{promotedVideosAutoplaying:d,organicVideosAutoplaying:u,videoCarouselModuleAutoplaying:c}=i,p=(0,o.Z)(d),_=(0,o.Z)(u),g=(0,o.Z)(c);return s?p[a]={...p[a],paused:!0,currentTime:n}:"VideoCarouselModule"===l?g[a]={...g[a],paused:!0,currentTime:n}:_[a]={..._[a],paused:!0,currentTime:n},{...e,videosAutoplaying:{currentlyPlayingOrganicVideoId:null,promotedVideosAutoplaying:p,organicVideosAutoplaying:_,videoCarouselModuleAutoplaying:g}}}if("SET_APP_FOCUS_STATE"===t.type&&e.appInFocus!==t.payload)return{...e,appInFocus:t.payload};if("SET_VIEWPORT_SIZE"===t.type&&e.viewportSize!==t.payload)return{...e,viewportSize:t.payload};if("SET_FOOTER_VISIBILITY_STATE"===t.type&&e.footerPlusButtonVisible!==t.payload)return{...e,footerPlusButtonVisible:t.payload};return e};var d=r(785893);let{Provider:u,get:c}=(0,s.Z)("AppUI");function p({children:e}){let[t,r]=(0,a.useReducer)(i,l),s=(0,a.useCallback)(e=>r({type:"PAUSE_CURRENT_VIDEO",payload:e}),[]),o=(0,a.useCallback)(e=>r({type:"SET_APP_FOCUS_STATE",payload:e}),[]),c=(0,a.useCallback)(e=>r({type:"SET_CURRENT_VIDEO",payload:e}),[]),p=(0,a.useCallback)(e=>r({type:"SET_FOOTER_VISIBILITY_STATE",payload:e}),[]),_=(0,a.useCallback)(e=>r({type:"SET_IS_AUTOPLAY",payload:e}),[]),g=(0,a.useCallback)(e=>r({type:"SET_VIEWPORT_SIZE",payload:e}),[]),m=(0,a.useCallback)(e=>r({type:"TOGGLE_TYPEAHEAD_OVERLAY",payload:e}),[]),h=(0,a.useMemo)(()=>({pauseAutoplay:s,setCurrentVideo:c,setFooterPlusButtonVisible:p,setIsAutoplay:_,setViewportSize:g,toggleTypeaheadOverlay:m,setAppFocusState:o,appUI:t}),[s,c,p,_,g,m,o,t]);return(0,a.useEffect)(()=>{n.Z.onSessionResume(()=>{o(!0)}).onSessionPause(()=>{o(!1)})},[o]),(0,d.jsx)(u,{value:h,children:e})}},841270:function(e,t,r){r.d(t,{KA:()=>n,T3:()=>s,Ur:()=>o,i5:()=>a,kx:()=>l});let a={AT:14,BE:13,BG:14,HR:16,CY:14,CZ:15,DK:13,EE:14,FI:13,FR:15,DE:16,GR:15,HU:16,IE:16,IT:14,LV:13,LT:14,LU:16,MT:13,NL:16,PL:16,PT:13,RO:16,SK:16,SI:15,ES:14,SE:13,GB:13},s={...a,KR:14},n=16,o=13,l=5},609170:function(e,t,r){r.d(t,{C:()=>s});var a=r(501010);function s(){let{checkExperiment:e}=(0,a.Z)();switch(e("entrypoints_collage_wasm").group){case"prefetch_all":default:return{preloadExtent:"Both"};case"prefetch_only_js":return{preloadExtent:"OnlyJS"};case"control":return{preloadExtent:"None"}}}},746319:function(e,t,r){r.d(t,{Z:()=>n});var a=r(935059),s=r(501010);let n=()=>{let{checkExperiment:e}=(0,s.Z)(),t=(0,a.Z)(),r=t.isAuth&&!t.isPartner;return (t=!1)=>{if(!r)return{anyEnabled:!1,followupFeatureEnabled:!1};let a=e("web_collage_creation",{dangerouslySkipActivation:t}),{anyEnabled:s}=a;return{anyEnabled:s,followupFeatureEnabled:a.group.startsWith("employee")||"enabled_followup_feature"===a.group}}}},872003:function(e,t,r){r.d(t,{G:()=>p,Kl:()=>_,vo:()=>c});var a=r(667294),s=r(213491),n=r(57887),o=r(17658),l=r(785893);let i=()=>r.e("65333").then(r.bind(r,557189)),{Provider:d,get:u}=(0,s.Z)("NativeEngagements");function c({children:e}){let[t,r]=(0,o.Z)(i,[]);(0,n.Z8)("NativeInteractionsResource",e=>{r({type:"FETCH_COMPLETE",payload:e})}),(0,n.my)("NativeInteractionsResource",e=>{r({type:"FETCH_MORE_COMPLETE",payload:e})});let s=(0,a.useMemo)(()=>({dispatch:r,nativeEngagements:t}),[r,t]);return(0,l.jsx)(d,{value:s,children:e})}function p(){let{dispatch:e}=u();return(0,a.useMemo)(()=>({nativeEngagementsHiddenForUser:t=>{e({type:"NATIVE_ENGAGEMENT_HIDDEN_FOR_USER",payload:{userId:t}})}}),[e])}function _(){let{nativeEngagements:e}=u();return e}},301527:function(e,t,r){r.d(t,{o:()=>l,p:()=>i});var a=r(667294),s=r(213491),n=r(785893);let{Provider:o,get:l}=(0,s.Z)("Session");function i({children:e}){let[t,r]=(0,a.useState)(void 0),s=(0,a.useCallback)(()=>r(void 0),[]),l=(0,a.useMemo)(()=>({unauthCommentPinId:t,setUnauthCommentPinId:r,removeUnauthCommentPinId:s}),[t,s]);return(0,n.jsx)(o,{value:l,children:e})}},201198:function(e,t,r){r.d(t,{Z:()=>d});var a=r(686659),s=r(667294),n=r(235045),o=r(785893);let l={__style:{margin:"0 10px",borderRight:"3px solid transparent",borderTop:"3px solid #fff",animation:"spin .8s linear infinite"}};function i(){return(0,o.jsx)(n.xu,{alignItems:"center",color:"primary",display:"flex",height:"100%",justifyContent:"center",position:"absolute",rounding:8,width:"100%",children:(0,o.jsx)(n.xu,{dangerouslySetInlineStyle:l,"data-test-id":"submit-button-spinner",display:"inlineBlock",height:18,position:"relative",rounding:"circle",width:18})})}function d({disabled:e,form:t,fullWidth:r,name:l,onClick:d,size:u,submitting:c,text:p}){return(0,s.useEffect)(()=>{(0,a.Z)("SubmitButton","/app/www/common/SubmitButton/SubmitButton.tsx")},[]),(0,o.jsxs)(n.xu,{"data-test-id":"submit-button",display:"flex",position:"relative",children:[c&&(0,o.jsx)(i,{}),(0,o.jsx)(n.zx,{color:"red",disabled:e||c,form:t,fullWidth:r,name:l,onClick:d,size:u,text:p,type:"submit"})]})}},966039:function(e,t,r){r.d(t,{Es:()=>d,HW:()=>i,er:()=>c,rQ:()=>u});var a=r(4533),s=r(34550),n=r(767415);let o=e=>e>=Date.now()-72e5,l=(e,t)=>{let r=[];if(e)for(let a of e)(!t||a.is_shared)&&o(a.ts)&&r.push(a);return r},i=()=>{let e=(0,s.M0)().getItem(a.uc)??[],t=l(e,!1),r=l(e,!0),n=t.map(e=>e.first_pin_image_signature),i=r.map(e=>e.first_pin_image_signature),d=(e=>{let t={};if(e)for(let r of e)r.is_shared&&o(r.ts)&&r.pin_id&&(t[r.pin_id]={inviteCode:r.pin_invite_code});return t})(e);return{extraPlpImages:n,plpImageRenderData:t,extraBlpImages:l((0,s.M0)().getItem(a.hI)??[],!0).map(e=>e.first_pin_image_signature),extraSharedImages:i,sharedPinData:d}},d=(e,t)=>{if(e.length!==t.length)return!1;for(let r=0;r<e.length;r+=1)if(e[r].id!==t[r].id)return!1;return!0},u=(e,t)=>e.map(e=>({1:e,2:(t[e]||[]).map(e=>({1:e,2:"pin"}))})),c=(e,t,r,a)=>{let s={};return e.forEach(e=>{let o=e.id,l=e.pins.length??0;s[o]=l,(0,n.QX)("webapp.log.nux.pin.picker.step.pin.number.of.pins",l,{sampleRate:1,addHostname:!0,tags:{appType:t,useCaseId:o,gender:r,age:a,use_case_display_name:e.display_name}}),(0,n.S0)("gauge.webapp.log.nux.pin.picker.step.pin.number.of.pins",l,{sampleRate:1,addHostname:!0,tags:{appType:t,useCaseId:o,gender:r,age:a,use_case_display_name:e.display_name}})}),s}},179664:function(e,t,r){r.d(t,{W:()=>c,u:()=>u});var a=r(667294),s=r(213491),n=r(501010),o=r(38359);let l=(e,t)=>{let r=((e,t)=>{switch(t.type){case"SELECT_PIN":{let{pinData:r,pinId:a,useCaseId:s}=t.payload;return function({pinData:e,pinId:t,state:r,useCaseId:a}){let s=new Map(r.selectedUseCases),n=s.get(a)||{selectedPins:[],heroPin:null,backfillPins:[]},o={...e,pinId:t,selectedAt:Date.now()};return s.set(a,{...n,selectedPins:[...n.selectedPins,o]}),{...r,selectedUseCases:s}}({pinData:r,pinId:a,state:e,useCaseId:s})}case"DESELECT_PIN":{let{pinId:r,useCaseId:a}=t.payload;return function({pinId:e,state:t,useCaseId:r}){let a=new Map(t.selectedUseCases),s=a.get(r);return s&&a.set(r,{...s,selectedPins:s.selectedPins.filter(t=>t.pinId!==e)}),{...t,selectedUseCases:a}}({pinId:r,state:e,useCaseId:a})}case"SELECT_USE_CASE":{let{heroPin:r,useCaseId:a}=t.payload;return function({heroPin:e,state:t,useCaseId:r}){let a=new Map(t.selectedUseCases);return a.set(r,{selectedPins:[],heroPin:e,backfillPins:[]}),{...t,selectedUseCases:a}}({heroPin:r,state:e,useCaseId:a})}case"DESELECT_USE_CASE":{let{useCaseId:r}=t.payload;return function({state:e,useCaseId:t}){let r=new Map(e.selectedUseCases);return r.delete(t),{...e,selectedUseCases:r}}({state:e,useCaseId:r})}case"ADD_BACKFILL_PINS":{let{backfillPins:r,useCaseId:a}=t.payload;return function({backfillPins:e,state:t,useCaseId:r}){let a=new Map(t.selectedUseCases),s=a.get(r);return s&&a.set(r,{...s,backfillPins:[...e]}),{...t,selectedUseCases:a}}({backfillPins:r,state:e,useCaseId:a})}default:return e}})(e,t);return{...r,history:[...r.history||[],t]}};var i=r(785893);let{Provider:d,get:u}=(0,s.Z)("Nux");function c({children:e}){let[t,r]=(0,a.useState)([]),[s,u]=(0,a.useState)({}),[c,p]=(0,a.useState)(!1),{checkExperiment:_}=(0,n.Z)(),g=_("ap_dweb_nux_revamp_auto_pin_select",{dangerouslySkipActivation:!0}).anyEnabled,m={selectedUseCases:new Map,history:[]},[h,f]=(0,a.useReducer)(l,m),y=(0,a.useCallback)(()=>Array.from(h.selectedUseCases.values()).reduce((e,t)=>e+t.selectedPins.length,0),[h.selectedUseCases]),E=(0,a.useCallback)(e=>Array.from(h.selectedUseCases.entries()).reduce((t,[r,a])=>e&&r===e?t:t.concat(a.selectedPins),[]),[h.selectedUseCases]),A=(0,a.useCallback)(e=>E(e).map(e=>({url:e.imageMediumUrl,height:e.height,width:e.width})),[E]),T=(0,a.useCallback)(()=>{let e=[];for(let[t,r]of h.selectedUseCases){let a=r.selectedPins.map(e=>({1:e.pinId,2:"pin"}));e.push({1:t,2:a})}return e},[h.selectedUseCases]),C=(0,a.useCallback)(()=>h.selectedUseCases&&y()>=o.HZ,[y,h.selectedUseCases]),b=(0,a.useCallback)(()=>g?h.selectedUseCases.size>=o.BT:h.selectedUseCases.size>=o.Yt,[h.selectedUseCases,g]),w=(0,a.useMemo)(()=>({checkHasMetMinimumPinSelectionRequirement:C,checkHasMetMinimumUseCaseSelectionRequirement:b,getNuxSignals:T,getNumSelectedPins:y,getSelectedPinImageData:A,nuxSelectionsDispatch:f,nuxSelectionsState:h,selectedPins:s,selectedUseCases:t,setSelectedPins:u,setSelectedUseCases:r,setShouldUseNewReducerState:p,shouldUseNewReducerState:c}),[C,b,T,y,A,f,h,s,t,u,r,p,c]);return(0,i.jsx)(d,{value:w,children:e})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/20988-dc28d8b2b7a64f25.mjs.map